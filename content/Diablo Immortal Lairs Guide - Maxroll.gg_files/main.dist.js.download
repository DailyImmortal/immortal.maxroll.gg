function get_cdr_needed_for_100_uptime(e,t,a){return 1-((e-t)/e-1)/(a-1)}function calc_sheet_by_dawn(e){return 100*get_cdr_needed_for_100_uptime(90,20,e/=100)}jQuery((function(e){const t={"d3-barbarian":["fire","lightning","physical","cold"],"d3-crusader":["fire","holy","lightning","physical"],"d3-demon-hunter":["fire","lightning","physical","cold"],"d3-monk":["fire","holy","lightning","physical","cold"],"d3-necromancer":["physical","poison","cold"],"d3-witch-doctor":["fire","physical","poison","cold"],"d3-wizard":["fire","lightning","arcane","cold"]};let a=e("#mxrl-coe-timer .timer-wrapper"),n=e("#mxrl-coe-timer .coe-elements"),i=e("#mxrl-coe-timer .timer"),o=e(".progress-bar .bar"),s=null,r=null;function l(){s&&clearTimeout(s),o.css({width:"100%"}),i.text(""),n.find(".on-rotation").removeClass("on-rotation")}function c(e,l){let c=Date.now(),d=t[e],p=d.length,u=-1,h=d.indexOf(l);s&&clearTimeout(s),r=function(){let e=(Date.now()-c+4e3*h)%(4e3*p)/4e3,t=Math.trunc(e);var l;o.css({width:100*(e-t)+"%"}),function(e){i.text((4*(1-e)).toFixed(1))}(e-t),u!==t&&(l=d[t],n.find(".on-rotation").removeClass("on-rotation"),n.find('[data-value="'+l+'"]').addClass("on-rotation"),a.attr("data-selected",l),u=t),s=setTimeout(r,10)},r()}e("#mxrl-coe-timer .filter-icon").click((function(){var i;e(".timer-wrapper").show(),l(),e("#mxrl-coe-timer .filter-icon").parent().removeClass("active"),e(this).parent().addClass("active"),i=e(this).data("for-tax"),n.find(".element").removeClass("active"),-1!==Object.keys(t).indexOf(i)&&(t[i].forEach((function(e,t){n.find('[data-value="'+e+'"]').addClass("active")})),a.attr("data-selected",n.find(".element.active").first().data("value")),a.removeClass("timer-active"),e(".element").click((function(){l(),e(this).addClass("on-rotation"),a.addClass("timer-active"),c(i,e(this).data("value"))})))}))})),jQuery((function(e){e("#dawn-value").on("change paste keyup",(function(){let t=parseFloat(e(this).val());if(!isNaN(t)&&t>=50&&t<=65){let a=Math.round(100*(calc_sheet_by_dawn(t)+Number.EPSILON))/100;e("#cdr-value").text(a+"%")}}))})),jQuery((function(e){function t(){let t=0;e('input[type="number"]').each((function(){t+=+parseInt(e(this).val())})),e("#js-total-amount").text("â‚¬"+t.toFixed(2)),0===t?e('button[type="submit"]').prop("disabled",!0):e('button[type="submit"]').prop("disabled",!1)}e('input[type="number"], input[type="range"]').on("input",(function(){let a=e(this);"number"==a.attr("type")?a.parent().find('input[type="range"]').val(a.val()):a.closest("section").find('input[type="number"]').val(a.val()),t()})),t()}));let loader={show:function(e="body"){0===jQuery(e+" .global-loading").length&&jQuery(e).addClass("global-loading style-2").append('<div class="loading-wheel"></div>')},hide:function(e="body"){jQuery(""+e).removeClass("global-loading style-2").children(".loading-wheel").remove()}};class CarouselManager{constructor(e){this.progressBarTimer=null,this.percent=0,this.interval=e.interval||30,this.container=e.container,this.speed=e.speed||300,this.direction=e.direction||"horizontal",this.loop=e.loop||!1,this.pagination=e.pagination||{},this.spaceBetween=e.spaceBetween||0,this.slidesPerView=e.slidesPerView||1,this.slidesPerGroup=e.slidesPerGroup||this.slidesPerView,this.loopFillGroupWithBlank=e.loopFillGroupWithBlank||!1,this.autoplay=e.autoplay||{},this.navigation=e.navigation||{},this.breakpoints=e.breakpoints||{},this.centeredSlides=e.centeredSlides||!1,this.minBreakpoint=e.minBreakpoint||"";let t=this;if(!jQuery(this.container).length)return;let a=function(e){!0!==e.matches?!1===e.matches&&t.enableSwiper():t.destroySwiper()};this.doBreakpointCheck=function(){t.minBreakpoint&&(t.mediaq=window.matchMedia(`(max-width:${t.minBreakpoint})`),t.mediaq.addListener(a),a(t.mediaq))},this.enableSwiper(),this.doBreakpointCheck(),jQuery(this.container).data("swiper",this)}destroySwiper(){void 0!==this.Swiper&&(Array.isArray(this.Swiper)?this.Swiper.forEach((function(e){e.destroy(!0,!0)})):this.Swiper.destroy(!0,!0),this.Swiper=void 0)}enableSwiper(){jQuery(this.container).length&&(this.destroySwiper(),this.Swiper=new Swiper(this.container,{speed:this.speed,direction:this.direction,loop:this.loop,pagination:this.pagination,spaceBetween:this.spaceBetween,slidesPerView:this.slidesPerView,loopFillGroupWithBlank:this.loopFillGroupWithBlank,centeredSlides:this.centeredSlides,autoplay:this.autoplay,navigation:this.navigation,breakpoints:this.breakpoints}))}}jQuery((function(e){let t=0,a=e(".news-carousel-container"),n=null;if(a.length){let e=new Swiper(".news-carousel-container",{speed:400,direction:"horizontal",loop:!0,pagination:{el:".swiper-pagination",clickable:!0}});function i(){t+=.5,t>=100&&(t=0,e.slideNext())}e.on("slideChange",(function(){t=0})),n=setInterval(i,30)}e(".swiper-container").hover((function(){clearInterval(n),n=null}),(function(){n||(n=setInterval(i,30))})),new CarouselManager({container:".carousel-post-list-wrapper",slidesPerView:4,spaceBetween:15,loop:!0,autoplay:{delay:5e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},navigation:{nextEl:".hot-topics-swiper-button-next",prevEl:".hot-topics-swiper-button-prev"},breakpoints:{316:{slidesPerView:1},616:{slidesPerView:2},916:{slidesPerView:2,spaceBetween:30},1201:{slidesPerView:4}},minBreakpoint:"616px"}),new CarouselManager({container:".social-banner-container",loop:!0,autoplay:{delay:5e3,disableOnInteraction:!1,pauseOnMouseEnter:!0}}),new CarouselManager({container:".teams-carousel",loop:!0,slidesPerView:6,centeredSlides:!0,breakpoints:{316:{slidesPerView:1,spaceBetween:90},800:{slidesPerView:2,spaceBetween:60},1100:{slidesPerView:3,spaceBetween:30},1450:{slidesPerView:4}},autoplay:{delay:5e3,disableOnInteraction:!1,pauseOnMouseEnter:!0}});const o=document.querySelector(".play-on-hover");o&&(o.addEventListener("mouseover",()=>{this.play()}),o.addEventListener("mouseleave",()=>{this.pause()})),e(".header-tabs-scrollable").draggable({axis:"x",start:function(t,a){e(this).data("dragging",!0)},stop:function(t,a){setTimeout((function(){e(t.target).data("dragging",!1)}),1)},drag:function(e,t){return!(t.position.left>0)&&(!(t.helper.width()+t.position.left-t.helper.parent().width()<0)&&void 0)}}),e(".right-tab-arrow").click((function(){let t=e(".header-tabs-scrollable"),a=t.children().first().outerWidth(!0);t.position().left+t.width()-t.parent().width()>a?t.css("left",t.position().left-a):t.css("left",t.parent().width()-t.width())})),e(".left-tab-arrow").click((function(){let t=e(".header-tabs-scrollable"),a=t.children().first().outerWidth(!0);t.position().left<-a?t.css("left",t.position().left+a):t.css("left",0)}));const s=e("#mxrl-main-sidebar"),r=e("#mxrl-header-wrapper .floating-menu"),l=e("#mxrl-main"),c=e('[id*="desktop-left-sidebar"]'),d=e('[id*="desktop-right-sidebar"]'),p=e("#ad-wrapper"),u=0!==e("body.page-d3planner").length||0!==e("body.page-d3planner-ptr").length||0!==e("body.page-d2planner").length||0!==e("body.page-d2planner-pd2").length||0!==e("body.page-d2planner-ptr").length;let h=0!==e("body.home").length,f=function(){if(!u){let e=0;window.pageYOffset<=e?r.css("top",e-window.pageYOffset):r.css("top",0)}};f();e(window).scroll((function(){if(!h&&s.length&&r.length&&(()=>{if(window.pageYOffset>=s.offset().top-r.height()+p.height()){let e=Math.min(l.height()-s.find(".floating").height(),window.pageYOffset-(s.offset().top-r.height()));s.find(".floating").addClass("sticky").css("top",e)}else s.find(".floating").removeClass("sticky")})(),c.length)if(window.pageYOffset>=c.parent().offset().top+275-r.height()){let e=Math.min(l.height()-c.height(),window.pageYOffset-(c.parent().offset().top-r.height()));c.css("top",e),d.css("top",e)}else c.css("top","275px"),d.css("top","275px");f()})),e(".menu-item-has-children > a").click((function(t){if(e("nav.open-menu").length){t.preventDefault();let a=e(this).parent();a.hasClass("opened")?(a.removeClass("opened"),a.find(".menu-item-has-children").removeClass("opened")):(e(e(this).parents()[1]).find(".menu-item-has-children").removeClass("opened"),a.addClass("opened"))}})),e(".main-menu>.menu-item-has-children:not(.mobile-only)").mouseenter((function(t){if(window.matchMedia("(max-width: 1200px)").matches)return;e(".sub-open").removeClass("sub-open").find(".sub-menu-wrap").first().css("max-height",0),e(".menu-opened").css("top","-1000px").css("overflow","hidden");let a=e(this).find(".sub-menu-wrap").first();a.find(".sub-menu").first().css("position","relative").css("bottom","0"),a.css("top","100%").css("height","unset").addClass("menu-opened")})).mouseleave((function(t){if(window.matchMedia("(max-width: 1200px)").matches)return;e(".sub-open").removeClass("sub-open").find(".sub-menu-wrap").first().css("max-height",0);let a=e(this).find(".sub-menu-wrap").first(),n=a.find(".sub-menu").first();a.css("top","-1000px").css("height","unset").css("overflow","hidden").removeClass("menu-opened"),n.css("position","static")})),e(".post-body a").click((function(t){if("#"===e(this).attr("href").charAt(0)){let a=e(this.hash);a.length>0&&(t.preventDefault(),t.stopPropagation(),history.pushState({},"",this.href),e("html, body").animate({scrollTop:a.offset().top-100},200))}})),e(".nothing-found-wrapper").click((function(){e(this).remove()})),e(".show-more").click((function(t){e(this).parent().toggleClass("show")})),e(".mobile-menu").click((function(){e("#mxrl-header nav").toggleClass("open-menu"),e(".game-selector-container").removeClass("selector-opened")})),e(".streamer-section .sidebar-header").click((function(){e(this).parent().toggleClass("user-expanded")})),e(".game-selector-container .select-text").click((function(){e(this).parent().toggleClass("selector-opened"),e("#mxrl-header nav").removeClass("open-menu")})),e("#mxrl-header .search-icon").click((function(){e("#mxrl-header .search-input").toggle()})),e(".game-selector-head").click((function(t){t.stopPropagation(),e(this).toggleClass("downwards"),e(this).parent().toggleClass("active")})),e("body").click((function(t){e(".game-selector-head").removeClass("downwards"),e(".game-selector-head").parent().removeClass("active")}));let g=()=>{let t=e(".quick-search input").val();if(t){let e=window.location.hostname.replace("maxroll.gg","").replace(".",""),a="wp_posts";"lost-ark"===e?a+="_la":"d3"!==e&&(a+="_"+e),location.href=location.origin+location.pathname+"/search?"+encodeURI(a+"[query]="+t)}};e(".profiles-title").click((function(){let t=e(this).data("for"),a=e('[data-id="'+t+'"]');e('.profiles-container.expanded:not([data-id="'+t+'"])').removeClass("expanded"),e('.profiles-title.expanded:not([data-for="'+t+'"])').removeClass("expanded"),a.toggleClass("expanded")})),e(".profiles-container").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",(function(){let t=e(this).data("id");e('[data-for="'+t+'"]').toggleClass("expanded")})),e(".class-filter .icon.-reset").click((function(){e(".filter .filter-item.active").removeClass("active"),e(".tl-bracket .tl-build.filtered").removeClass("filtered"),e('.filter input[data-taxonomy="classes"]').prop("value","false")})),e(".class-filter .filter-item").click((function(){let t=e(this).hasClass("active");e(this).toggleClass("active",!t),e(this).find("input").prop("value",!t);let a=[];e.find('input[data-taxonomy="classes"][value="true"]').forEach(e=>a.push(e.name.replace("d3-","").replace("d2-",""))),0===a.length&&e.find('input[data-taxonomy="classes"]').forEach(e=>a.push(e.name.replace("d3-","").replace("d2-",""))),e.find(".tl-bracket .tl-build").forEach(t=>{let n=e(t).find(".tl-icon").first().attr("class").split(/\s+/).filter(e=>-1!==e.indexOf("class-")).shift().replace("class-","");-1===a.indexOf(n)?e(t).addClass("filtered"):e(t).removeClass("filtered")})})),e(".author-bio-button").click((function(){let t=e(this).hasClass("downwards");e(this).toggleClass("downwards").parent().find(".author-bio").toggleClass("opened",t)})),e(".quick-search .search-icon-box").click(g),e(".quick-search input").keypress((function(e){13==e.which&&g()})),e(".header-tab:not(.inactive)").click((function(){if(e(this).parent().data("dragging"))return;e(".header-tab.active").removeClass("active"),e(this).addClass("active"),e(".tab-container.active").removeClass("active");let t=e(this).data("tab-for"),a=e(`.tab-container[data-tab-id="${t}"]`);a.addClass("active");let n=a.data("swiper");n&&(n.enableSwiper(),n.doBreakpointCheck())})),window.matchMedia("(max-width: 1200px)").matches?e(".flippable").click((function(){e(this).toggleClass("is-flipped")})):e(".flippable").hover((function(){e(this).toggleClass("is-flipped")})),window.fetch&&fetch("https://s.nitropay.com/ads-520.js?"+Math.floor(1e4*Math.random())).catch((function(){e("body").addClass("adblock"),window.hasAdBlock=!0}))})),window.onload=function(e){if(window.location.hash){let t;try{t=$(window.location.hash)}catch(e){return}e.preventDefault(),e.stopPropagation(),t.length>0&&$("html, body").animate({scrollTop:t.offset().top-100},200)}if(window.location.href.indexOf("local.maxroll.gg")>-1){const e=document.getElementById("ncmp__tool");e&&(e.style="display:none;")}},jQuery((function(e){let t=e('[id^="mapplic-id"]');t.on("mapready",(function(a,n){t.on("locationopened",(function(e,t){if("none"==t.action&&t.id.startsWith("open-level-")){let e=t.id.replace("open-level-","");n.switchLevel(e),n.moveTo(.5,.5,0,0)}})),t.on("levelswitched",(function(t,a){let i=[];Object.keys(n.l).forEach((function(e){n.l[e].level==a&&"category"in n.l[e]&&i.push(n.l[e].category)})),e(".mapplic-legend .mapplic-toggle").each((function(t,a){let n=e(a).find("input").data("group");i.indexOf(n)>-1?e(a).show():e(a).hide()}))})).trigger("levelswitched",n.level)}))}));let table_url="/wp-content/themes/maxroll/assets/js/paragon_total_exp.json",paragon_table=[],gr_xp_scale=.05,player_gr_xp_bonus=.1,pool_of_ref_bonus=.25,pool_of_ref_amount=.5,gr_data={100:{monsters:26e9,close:38106169344}};function formatSize(e){let t=0;if(e<1)return 0;if(e>=1e3){if(t=Math.floor(Math.log(e)/Math.log(1e3)),t>=" KMBTQ".length)return"N/A";e=1*(e/Math.pow(1e3,t)).toFixed(2)+" "}return e+" KMBTQ"[t]}function binarySearchRange(e,t,a=0,n=e.length-1){if(isNaN(t))return-1;for(;a<=n;){let i=Math.floor((a+n)/2);if(t>=e[i]&&t<=e[i+1])return i;t>e[i]&&(a=i+1),t<e[i]&&(n=i-1)}return-1}function get_paragon_table(e){0!==paragon_table.length?e():jQuery.get(table_url,(function(t){paragon_table=t,e()}))}function calculate_paragon_sum(e,t){return isNaN(e)||0===e?t:isNaN(t)||0===t?e:void get_paragon_table((function(){let a=paragon_table[e],n=paragon_table[t],i=binarySearchRange(paragon_table,a+n,Math.max(t,e),t+e);-1!==i?jQuery("#paragon-result").text(i):jQuery("#paragon-result").text("Unknown")}))}function calculate_xp_needed(e,t,a){get_paragon_table((function(){if(isNaN(e))return void a(-1);if(isNaN(t)||t<=e)return void a(-1);let n=paragon_table[e],i=paragon_table[t];a(i-n)}))}function calculate_xp_per_h(e,t,a,n,i){let o=calculate_xp_from_gr(e,t);if(-1===o)return-1;if(isNaN(a)||a<0||isNaN(n)||n<0)return-1;let s=0;return s=i?o.monsters*(1+pool_of_ref_bonus)+o.close*(1+pool_of_ref_bonus)*(1+pool_of_ref_bonus):o.monsters+o.close,60*s/(a+n/60)}function calculate_pools_consumed(e,t,a){if(isNaN(t))return-1;t<1&&(t=1),t>2e4&&(t=2e4),get_paragon_table((function(){let n=paragon_table[t]+e.monsters*(1+pool_of_ref_bonus)+e.close*(1+pool_of_ref_bonus)*(1+pool_of_ref_bonus),i=binarySearchRange(paragon_table,n,t);if(-1!==i){let e=(n-paragon_table[i])/(paragon_table[i+1]-paragon_table[i]);a((i-t)/pool_of_ref_amount+e/pool_of_ref_amount)}else a(-1)}))}function calculate_xp_from_gr(e,t){if((t<1||t>4)&&(t=1),isNaN(e)||isNaN(t))return-1;if(e<71&&(e=71),e>150&&(e=150),!(e in gr_data)){let t=Math.abs(e-100),a=Math.pow(1+gr_xp_scale,t);gr_data[e]={},e<100?(gr_data[e].monsters=gr_data[100].monsters/a,gr_data[e].close=gr_data[100].close/a):(gr_data[e].monsters=gr_data[100].monsters*a,gr_data[e].close=gr_data[100].close*a)}let a={};return a.monsters=gr_data[e].monsters,a.close=gr_data[e].close,a.monsters*=1+player_gr_xp_bonus*(t-1),a}jQuery((function(e){e("#paragon1, #paragon2").on("change paste keyup",(function(){let t=calculate_paragon_sum(parseInt(e("#paragon1").val()),parseInt(e("#paragon2").val()));e("#result_paragon").val(t)})),e("#current-paragon, #gr-level, #number-of-players").on("change paste keyup",(function(){let t=calculate_xp_from_gr(parseInt(e("#gr-level").val()),parseInt(e("#number-of-players").val()));-1!==t&&(e("#xp-from-gr").text(formatSize(t.monsters+t.close)),e("#xp-from-gr-pooled").text(formatSize(t.monsters*(1+pool_of_ref_bonus)+t.close*(1+pool_of_ref_bonus)*(1+pool_of_ref_bonus))),calculate_pools_consumed(t,parseInt(e("#current-paragon").val()),(function(t){-1!==t&&e("#pools-needed").text(t.toFixed(2))})))})),e("#current-paragon2, #desired-paragon, #gr-level2, #number-of-players2, #avg-gr-time, #avg-town-time, #fully-pooled, #h-day").on("change paste keyup",(function(){calculate_xp_needed(parseInt(e("#current-paragon2").val()),parseInt(e("#desired-paragon").val()),(function(t){if(-1!==t){e("#xp-needed").text(formatSize(Math.trunc(t)));let a=calculate_xp_per_h(parseInt(e("#gr-level2").val()),parseInt(e("#number-of-players2").val()),parseFloat(e("#avg-gr-time").val()),parseFloat(e("#avg-town-time").val()),"1"==e("#fully-pooled").val());if(-1!==a){let n=parseInt(e("#h-day").val());e("#xp-h").text(formatSize(Math.trunc(a))),isNaN(a)||0===a||(e("#hours-needed").text((t/a).toFixed(1)),isNaN(n)||0===n||e("#days-needed").text((t/a/n).toFixed(1)))}}}))}))}));